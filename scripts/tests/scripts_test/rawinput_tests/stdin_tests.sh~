#! /bin/bash

# Set exit status, output error to stderr
# if any, output "done! (n errors)" to stdout.
#
# exit with 0 if no errors; exit with 1 if errors.

nerr=0
exit_status=0

if [ `echo "hello" | rawinput` = "hello" ]; then
    true
else
    echo "actual output was the following:"
    echo `echo "hello" | rawinput`
    nerr=`expr $nerr + 1`
    exit_status=1
    echo "test one failed!" >&2
fi

# print to stderr the number of errors and exit with $exit_status

echo "There were $nerr error(s)." >&2
exit $exit_status